---
title: "Pràctica 2: Neteja i anàlisi de les dades"
author: "Rigau, Pol. Tienda, Arnau"
date: "13/05/2020"
output:
  pdf_document: default
  html_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

### Anàlisis de vins

## Descripció

En aquesta practica hem escollit el dataset “Red Wine Quality” disponible a la pagina web kraggle i al repositori UCI.

Aquest dataset conté informació sobre diversos paràmetres químics resultants de l'analisis de vins blancs i negres de la regió portugesa 'Vinho verde' i una classificació segons la seva qualitat. 

Amb aquestes dades es poden crear algoritmes per a la classificació de vins. Ens permet agrupar vins per les seves semblances i també determinar quins son els factors que afecten més a la seva qualitat.


## Neteja de dades

En primer lloc, es carreguen les dades:

```{r}
wine <- read.csv('winequality-red.csv', header = TRUE)
```

Es mostren quins son els atributs

- Àcidesa fixe
- Àcidesa volatil 
- Àcid cítric
- Sucre residual
- Clorurs
- Diòxid de sofre lliure
- Diòxid de sofre residual
- Densitat
- pH
- Sulfats
- Alcohol
- Qualitat

Tenim 11 descriptors i un resultat, que es la **qualitat**.

S'observa que no hi ha cap atribut per identificar els registres, pel que s'asigna un número **id** a cada fila. 

```{r}
id <- 1:nrow(wine)
wine <- cbind(id=id, wine)
```

A continuació realitzem un primer analisi dels atributs que tenim: 

```{r}

str(wine)
```

Observem que les dades que tenim són númeriques, excepte les corresponents als atributs **id** i **quality**. En el primer cas és correcte, peò les dades de **quality** haurien de ser factors, per tal de tenir una mesura, i per tant les convertim. 

```{r}
wine$quality <- as.factor(wine$quality)
```

Ens interesa treballar amb totes les dades que disposem, no descartarem cap dels atributs dels que disposem. 

A continuació comprovem si hi ha dades nules.

```{r}
sapply(wine, function(x) sum(is.na(x)))
```

Veiem que no n'hi ha en cap dels atributs.

A continació realitzarem una exploració dels outliers, pel que graficarem els bloxpot dels atributs que siguin númerics per a tenir una representació visual.

```{r}
graph_wine = par(mfrow = c(2,4))

for (i in colnames(wine)){
  if (!(i %in% c('quality', 'id'))){
    boxplot(wine[[i]], xlab = i)
  }
}

```
Observem que en la majoria de casos tenim valors extrems en la part de valors més elevats. 

---
Falta decidir si tractem els outliers qeu siguin més de 3 cops la desviació standard o els deixem tal cual
---

## Anàlisi de dades

A continuacio es fara un anàlisis de les dades disponibles. 

```{r}
summary(wine)
```

Es realitza un altre tipus de gràfic, en aquest cas un histograma, per a observar la distribució de les dades. Aquest analisi, també ens ajudara a comprobar si segueixen la normalitat. 

```{r}

graph_wine = par(mfrow = c(2,4))

for (i in colnames(wine[-1])){
  hist(as.numeric(wine[[i]]), xlab = i, main= i)
  if (!(i == 'quality')){
    results_test = shapiro.test(wine[[i]])
    print(results_test)
  }
}

```

S'observa, com ja s'havia vist en el bloxplot, les variables no presenten una distribució normal.
Cap d'elles cumpleix la hipotesi nula del test de Shapiro-Wilk, pel que podem determinar que no compleixen la normalitat.

Es realitza aleshores el test per a comprobar la homoesciditat de les dades. Com que aquestes no compleixen la normalitat, es realitza el tes de Fligner-Killeen

```{r}
fligner.test(wine)
```

Els resultats obtinguts són contraris a la hipotesi, pel que les variables no compleixen homodescidat.

A continuació d'estudiara la relació que hi ha entre les dades, si aquestes correlacionen entre si.
```{r}
#pairs(wine[-1])
```


## Bibliografía.



Red Wine Quality. https://www.kaggle.com/uciml/red-wine-quality-cortez-et-al-2009/undefined. 2018

P. Cortez, A. Cerdeira, F. Almeida, T. Matos and J. Reis. Modeling wine preferences by data mining from physicochemical properties. In Decision Support Systems, Elsevier, 47(4):547-553, 2009.

